<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Usuario</title>
    <link rel="stylesheet" href="userprofile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>
    <div class="container">
        <nav class="sidebar"> 
            <%- include('../partials/navbar') %> 
        </nav>

        <main class="main-content">

            <section class="profile-section">
                <div class="image-and-info">
                    <div class="image-preview" onclick="document.getElementById('photo-input').click();">
                        <img id="profile-photo" src="default-profile.png" alt=".">
                        <div class="overlay">
                            <i class="fas fa-camera"></i>
                            <span>Cambiar Foto del Perfil</span>
                        </div>
                    </div>
                    <input type="file" id="photo-input" accept="image/*" onchange="previewImage(event)" style="display:none;">
                </div>

                <div class="info-fields">
                    <div class="form-group left-column">
                        <label for="nombre">Nombre</label>
                        <input type="text" id="nombre" value="Kevin" disabled>
                    </div>
                    <div class="form-group right-column">
                        <label for="apellidos">Apellidos</label>
                        <input type="text" id="apellidos" value="Coledani" disabled>
                    </div>
                    <div class="form-group left-column">
                        <label for="email">Correo Electrónico</label>
                        <input type="email" id="email" value="kevin@example.com">
                    </div>
                    <div class="form-group password-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" value="********">
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility()"></i>
                    </div>
                    <div class="form-group left-column">
                        <label for="rol">Rol</label>
                        <input type="text" id="rol" value="Empleado" disabled>
                    </div>
                    <div class="form-group right-column">
                        <label for="assigned-evaluations">Evaluaciones Asignadas</label>
                        <input type="text" id="assigned-evaluations" value="5" disabled>
                    </div>
                    <div class="form-group left-column">
                        <label for="completed-evaluations">Evaluaciones Completadas</label>
                        <input type="text" id="completed-evaluations" value="4" disabled>
                    </div>
                    <div class="form-group right-column">
                        <label for="given-evaluations">Evaluaciones Asignadas por mí</label>
                        <input type="text" id="given-evaluations" value="3" disabled>
                    </div>
                </div>
            </section>

            <div class="edit-buttons">
                <button class="btn-edit" onclick="enableEditing()">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button class="btn-save" style="display:none;" onclick="saveChanges()">
                    <i class="fas fa-save"></i> Guardar
                </button>
                <button class="btn-cancel" style="display:none;" onclick="cancelChanges()">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>            
        </main>
    </div>

    <script>
        function enableEditing() {
            document.getElementById('email').disabled = false;
            document.getElementById('password').disabled = false;

            document.querySelector('.btn-edit').style.display = 'none';
            document.querySelector('.btn-save').style.display = 'inline-block';
            document.querySelector('.btn-cancel').style.display = 'inline-block';
        }

        function saveChanges() {
            document.getElementById('email').disabled = true;
            document.getElementById('password').disabled = true;
            
            document.querySelector('.btn-edit').style.display = 'inline-block';
            document.querySelector('.btn-save').style.display = 'none';
            document.querySelector('.btn-cancel').style.display = 'none';
        }

        function cancelChanges() {
            document.getElementById('email').value = 'kevin@example.com';
            document.getElementById('password').value = '********';
            
            saveChanges();
        }

        function togglePassword() {
            const passwordInput = document.getElementById('password');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
            } else {
                passwordInput.type = 'password';
            }
        }

        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('profile-photo');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }

        function togglePasswordVisibility() {
        const passwordInput = document.getElementById('password');
        const toggleIcon = document.querySelector('.toggle-password');
        
        // Alterna el tipo de input entre 'password' y 'text'
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash'); // Cambia el icono al ojo cerrado
        } else {
            passwordInput.type = 'password';
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye'); // Cambia el icono al ojo abierto
        }
        }

    </script>
</body>
</html>
