<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Evaluaciones</title>
    <link rel="stylesheet" href="evaluaciones.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <nav> <%- include('../partials/navbar') %> </nav>

        <!-- Panel principal -->
        <main class="main-content">
            <header class="header">
                <div class="search-section">
                    <input class="busqueda" type="text" placeholder="Buscar ...">
                    <i class="fas fa-search search-icon"></i>
                </div>
                
                <div class="header-options">
                    <i class="fas fa-bell"></i>
                    <i class="fas fa-cog"></i>
                    <img src="/img/profile.png" alt="Carina Campo" class="profile-img">
                </div>
            </header>

            <div class="filter-panel-container">
                <section class="evaluation-section">
                    <h2>Evaluaciones Asignadas</h2>

                    <!-- Aquí comienza el ciclo de evaluaciones en EJS -->
                    <% evaluaciones.forEach(evaluacion => { %>
                        <div class="evaluation-card">
                            <img src="empleado1.jpg"" class="eval-img">
                            <div class="eval-info">
                                <p><strong><%= evaluacion.empleado %></strong></p>
                                <p>Fecha Inicio: xxxx| Fecha Fin: xxxx</p>
                                <br>
                                <p class="eval-status"><%= evaluacion.formulario.titulo %></p>
                            </div>
                            <div class="eval-summary">
                                <a href="/evaluaciones/<%= evaluacion._id %>" class="btn">Ver Evaluación</a>
                            </div>
                        </div>
                    <% }) %>

                </section>

                <aside class="right-panel">
                    <div class="filter-section">
                        <h3>Filtrar por</h3>
                        <select class="filter-select">
                            <option value="periodo">Periodo</option>
                        </select>
                        <div class="filter-order">
                            <label><span class="blue-dot"></span> Más reciente</label>
                            <label><span class="yellow-dot"></span> Más antigua</label>
                        </div>
                        <div class="status-buttons">
                            <div class="status-button evaluate">
                                <span class="green-dot"></span>
                                <span>Completas</span>
                                <span class="triangle"></span>
                            </div>
                        </div>
                        <br>
                        <div class="status-buttons">
                            <div class="status-button evaluate">
                                <span class="red-dot"></span>
                                <span>Incompletas </span>
                                <span class="triangle"></span>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>

            <section class="evaluation-finished">
                <h2>Evaluaciones Finalizadas</h2>

                <!-- Aquí continúa el ciclo de evaluaciones -->
                <% evaluaciones.forEach(evaluacion => { %>
                    <div class="evaluation-card">
                        <img src="empleado1.jpg" class="eval-img">
                        <div class="eval-info">
                            <p><strong><%= evaluacion.empleado %></strong></p>
                            <p>Fecha Inicio: xxxx | Fecha Fin: xxxx </p>
                            <br>
                            <p class="eval-status"><%= evaluacion.formulario.titulo %></p>
                        </div>
                        <div class="eval-summary">
                            <p>Autoevaluación</p>
                            <div class="eval-icons">
                                <i class="fas fa-download download-icon"></i>
                                <i class="fas fa-filter filter-icon"></i>
                            </div>
                        </div>
                    </div>
                <% }) %>

            </section>

            <!-- Botón para crear una nueva evaluación -->
            <div class="evaluation-actions">
                <button id="nuevaEvaluacionBtn">Crear Nueva Evaluación</button>
            </div>

        </main>
    </div>

    <script>
        const dropdownBtn = document.querySelector('.dropdown-btn');
        const dropdownContainer = document.querySelector('.dropdown-container');

        dropdownBtn.addEventListener('click', function (e) {
            e.preventDefault();
            dropdownContainer.classList.toggle('active');
        });

        // Botón para crear nueva evaluación
        document.getElementById('nuevaEvaluacionBtn').addEventListener('click', function() {
            window.location.href = '/evaluaciones/new';
        });
    </script>
</body>

</html>

