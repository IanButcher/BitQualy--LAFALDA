<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preview Evaluaci贸n</title>
    <link rel="stylesheet" href="/evaluacion.css">
    <link rel="stylesheet" href="/navbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/png" href="https://ugc.production.linktr.ee/mj5IciCyRk2puUukygYa_kmwAn8AE84X4N3S5?io=true&size=avatar-v3_0">
    
</head>
<body>
    <nav> <%- include('../partials/navbar') %> </nav>

    <!-- Panel principal -->
    <div class="main-content">
        <header> <%- include('../partials/headerU') %> </header>
    

        <!-- Contenido principal de la evaluaci贸n -->
        <div class="evaluation-content">
            <h2>Evaluaci贸n: <%= evaluacion.formulario.titulo %></h2>
            <p><strong>Empleado:</strong> <%= evaluacion.empleado %></p>

            <!-- Mostrar preguntas y respuestas -->
            <div class="respuestas-container">
                <% evaluacion.formulario.questions.forEach((pregunta, index) => { %>
                    <div class="respuesta-item">
                        <h3><%= pregunta.titulo %></h3>
                        <p><%= pregunta.descripcion %></p>
                        <p>
                            <% if (Array.isArray(evaluacion.respuestas[index])) { %>
                                <%= evaluacion.respuestas[index].join(', ') %>
                            <% } else { %>
                                <%= evaluacion.respuestas[index] %>
                            <% } %>
                        </p>
                    </div>
                <% }) %>
            </div>
        </div>
        <h1>Preview de la Evaluaci贸n</h1>
        <h2>Formulario: <%= evaluacion.formulario.name %></h2>
        <h3>Empleado: <%= evaluacion.empleado %></h3>

        <table border="1">
            <thead>
                <tr>
                    <th>Pregunta</th>
                    <th>Respuesta</th>
                </tr>
            </thead>
            <tbody>
                <% evaluacion.formulario.questions.forEach((question, index) => { %>
                    <tr>
                        <td><%= question.text %></td>
                        <td>
                            <% if (typeof evaluacion.respuestas[index] === 'string') { %>
                                <%= evaluacion.respuestas[index] %>  
                            <% } else if (Array.isArray(evaluacion.respuestas[index])) { %>
                                Seleccionado(s): <%= evaluacion.respuestas[index].join(', ') %>  
                            <% } else { %>
                                <%= JSON.stringify(evaluacion.respuestas[index]) %> 
                            <% } %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <a class="button" href="/evaluaciones">Volver a las evaluaciones</a>


    <script>
        document.getElementById('dropdown-toggle').addEventListener('click', function () {
            const dropdownContent = document.getElementById('dropdown-content');
            if (dropdownContent.style.display === 'block') {
                dropdownContent.style.display = 'none';
            } else {
                dropdownContent.style.display = 'block';
            }
        });
    </script>
</body>
</html>