<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Evaluación</title>
    <link rel="stylesheet" href="/formularios.css">
    <link rel="stylesheet" href="/new.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <nav> <%- include('../partials/navbar') %> </nav>

        <!-- Select para seleccionar el formulario -->
        <label for="formularioSelect">Seleccionar Formulario:</label>
        <select id="formularioSelect" name="formulario" required>
            <option value="">--Seleccionar Formulario--</option>
            <% formularios.forEach(formulario => { %>
                <option value="<%= formulario._id %>"><%= formulario.titulo %></option>
            <% }) %>
        </select>

        <!-- Select para seleccionar empleado -->
        <label for="empleadoSelect">Seleccionar Empleado:</label>
        <select id="empleadoSelect" name="empleado" required>
            <option value="">--Seleccionar Empleado--</option>
            <!-- Placeholder: Add logic to dynamically populate empleados -->
            <option value="Juan">Juan</option>
            <option value="Maria">Maria</option>
        </select>

        <!-- Botón para aceptar y mostrar las preguntas -->
        <button type="button" onclick="submitForm()">Aceptar</button>
    </div>

    <script>
        // Function to submit the form and redirect to the questions page
        function submitForm() {
            const formularioId = document.getElementById('formularioSelect').value;
            const empleado = document.getElementById('empleadoSelect').value;

            if (formularioId && empleado) {
                window.location.href = `/evaluaciones/answer/${formularioId}?empleado=${empleado}`;
            } else {
                alert("Por favor selecciona un formulario y un empleado.");
            }
        }

        document.getElementById('dropdown-toggle').addEventListener('click', function () {
            const dropdownContent = document.getElementById('dropdown-content');
            dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
        });
    </script>
</body>
</html>
